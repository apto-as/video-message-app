# 新機能開発 要件定義質問リスト
## Requirements Definition Questionnaire - Next Phase Features

**Project**: Video Message App - Next Phase Development
**Date**: 2025-11-02
**Status**: 🔴 PENDING USER RESPONSES
**Total Questions**: 68 items

---

## 📋 回答方法 (How to Respond)

このドキュメントの各質問に対して、**直接このファイルに回答を追記**してください。

**回答形式**:
```markdown
### Q1: 質問内容
**優先度**: 🔴 Critical

**回答**: ここに回答を記入してください

**理由・補足**: 必要に応じて追加情報を記入
```

**推奨回答順序**:
1. 🔴 **Critical** (8項目) - 実装を左右する最重要事項
2. 🟡 **Important** (6項目) - 設計に影響する重要事項
3. 🟢 **Nice to Have** - 将来的な機能拡張

**不明な場合**: "検討中" または "お任せします" と記入してください

---

## 🔴 CRITICAL QUESTIONS (必須回答 - 実装ブロッカー)

### Feature 1: 複数人物選択UI

#### Q1: 人物検出時のUI配置
**優先度**: 🔴 Critical
**カテゴリ**: UI/UX Design

**質問**:
複数人物が検出された場合、どの人物を残すかを選択するUIの配置はどこが良いですか？

**選択肢**:
- A) モーダルダイアログ（画面中央にポップアップ）
- B) サイドパネル（画面右側にスライド表示）
- C) インライン（画像プレビューの下に表示）
- D) ステップ形式（ウィザード画面で別ページ）

**回答**:
C)でお願いします。


**理由・補足**:
画面遷移はなるべくせずに、一つの画面内で行いたい為です。

---

#### Q2: 人物プレビューの表示方法
**優先度**: 🔴 Critical
**カテゴリ**: UI/UX Design

**質問**:
検出された各人物をどのように表示しますか？

**選択肢**:
- A) サムネイル一覧（横並び）+ クリックで選択
- B) カルーセル（スワイプで切り替え）
- C) グリッドレイアウト（タイル表示）
- D) リスト形式（縦並び、ラジオボタン選択）

**回答**:
A)でお願いします。

**補足（表示サイズ、枚数制限など）**:
サイズは、01やアップロード画像の表示範囲を超えない横幅でリストアップして下さい。

---

#### Q3: 選択後の確認フロー
**優先度**: 🔴 Critical
**カテゴリ**: Workflow

**質問**:
人物を選択した後、確認ステップは必要ですか？

**選択肢**:
- A) 必要（"この人物で生成しますか？" の確認ダイアログ）
- B) 不要（選択後すぐに次のステップへ）
- C) プレビュー表示のみ（背景削除結果をプレビュー）

**回答**:
B)でお願いします。

**理由**:
手順はなるべく簡素化したいです。

---

### Feature 2: BiRefNet高精度セグメンテーション

#### Q4: BiRefNetのデプロイ場所
**優先度**: 🔴 Critical
**カテゴリ**: Infrastructure

**質問**:
BiRefNet（高精度背景除去モデル）をどこで実行しますか？

**選択肢**:
- A) **ローカル開発環境のみ**（Mac/Windows、開発時のみ使用）
- B) **EC2インスタンス**（既存のg4dn.xlarge、Tesla T4 GPU）
- C) **AWS SageMaker**（専用推論エンドポイント、月額$200-400）
- D) **Lambda + Container**（サーバーレス、使用時のみ課金）

**回答**:
B)でお願いします。

**補足（コスト、速度、スケーラビリティの優先順位）**:
現状はEC2インスタンスで全ての機能を提供したい為です。

---

#### Q5: BiRefNetの精度とパフォーマンスのトレードオフ
**優先度**: 🔴 Critical
**カテゴリ**: Performance

**質問**:
精度と処理速度のどちらを優先しますか？

**現状（rembg）**: 処理時間 150ms、精度 85%
**BiRefNet**: 処理時間 80ms（GPU）、精度 95%

**選択肢**:
- A) **精度優先**（95%精度、GPUで80ms）
- B) **速度優先**（90%精度、最適化で40ms）
- C) **バランス型**（92%精度、60ms）
- D) **ユーザー選択式**（UI で精度・速度を選択可能）

**回答**:
A)でお願いします。

**想定ユースケース（髪の毛の細部まで必要？など）**:
ある程度、髪の毛の間などの除去も必要ですが、よほど細かい細部は必要ありません。


---

### Feature 3: D-ID最適化パイプライン

#### Q6: D-ID推奨アスペクト比の自動補正方法
**優先度**: 🔴 Critical
**カテ�ゴリ**: Image Processing

**質問**:
D-IDは 9:16（縦長）または 16:9（横長）を推奨していますが、元画像が異なる場合どうしますか？

**選択肢**:
- A) **クロップ（切り取り）**: 中央を基準に推奨比率で切り出し
- B) **パディング（余白追加）**: 背景色で余白を追加
- C) **ユーザー選択**: UI でクロップ位置を調整可能
- D) **AIによる自動判断**: 顔の位置を基準に最適な位置で切り出し

**回答**:
D)でお願いします。

**背景色（パディングの場合）**:
背景画像が指定されている場合は、その画像を拡大・縮小などして推奨比率にして下さい。
背景画像が指定されていない場合は、背景色（白）でパディングして下さい。

---

#### Q7: D-ID最適化の品質基準
**優先度**: 🔴 Critical
**カテゴリ**: Quality Assurance

**質問**:
D-ID処理前の画像に対して、どの程度の品質向上を期待しますか？

**最適化項目**:
- 解像度アップスケール（最大4K）
- シャープネス調整（Unsharp Mask）
- ノイズ除去（Non-local Means）
- 明るさ・コントラスト補正（CLAHE）

**選択肢**:
- A) **フル最適化**（すべて適用、処理時間 +3秒）
- B) **軽量最適化**（解像度とシャープネスのみ、+1秒）
- C) **必要時のみ**（低解像度画像のみ自動判定）
- D) **ユーザー選択**（UI でオン/オフ切り替え）

**回答**:
A)ですが、解像度アップは必要ありません。


**画質の許容範囲（最低解像度など）**:
シャープネスやノイズ除去は必要ですが、解像度アップは必要ありません。

---

### Feature 4: 自然な口調（プロソディ調整）

#### Q8: プロソディ調整の自動化レベル
**優先度**: 🔴 Critical
**カテゴリ**: Voice Processing

**質問**:
音声の自然さをどの程度自動調整しますか？

**調整パラメータ**:
- ピッチ（高低）の変動
- エネルギー（強弱）の変動
- 話速の変動
- ポーズ（間）の挿入

**選択肢**:
- A) **完全自動**（AIが文脈を解析して最適化）
- B) **セミオート**（基本は自動、UI で微調整可能）
- C) **手動調整**（すべてユーザーが UI でコントロール）
- D) **プリセット選択**（"落ち着いた", "元気", "ビジネス" など）

**回答**:
A)でお願いします。

**想定シーン（プレゼン、挨拶、説明など）**:
お祝いメッセージなので、明るくハキハキして、ポーズの挿入を重視して欲しいです。空白文字や区切り文字があれば、それがポーズの合図になります。

---

## 🟡 IMPORTANT QUESTIONS (設計に影響)

### Feature 5: BGM統合

#### Q9: BGMライブラリの管理方法
**優先度**: 🟡 Important
**カテゴリ**: Content Management

**質問**:
システム内部で保持するBGMをどのように管理しますか？

**選択肢**:
- A) **固定BGM集**（システムに5-10曲を組み込み）
- B) **ユーザーアップロード**（独自のBGMをアップロード可能）
- C) **外部ライブラリ連携**（著作権フリー音源サイトと連携）
- D) **A + B のハイブリッド**（デフォルト + カスタム）

**回答**:
D)案でお願いします。

**BGMの種類（ジャンル、雰囲気）**:
お祝いにふさわしいジャンルや雰囲気のBGMをシステムで5曲組み込みたいです。
これは、開発時にWebから調査して取得して欲しいです。

---

#### Q10: BGMの音量調整（ダッキング）
**優先度**: 🟡 Important
**カテゴリ**: Audio Processing

**質問**:
音声が流れている間、BGMの音量を下げる（ダッキング）処理は必要ですか？

**選択肢**:
- A) **必要**（音声時は BGM を -12dB に減衰）
- B) **不要**（BGM は常に一定音量）
- C) **ユーザー選択**（UI で音量バランスを調整）

**回答**:
B)でお願いします。

**希望する音声:BGM の音量比率**:
音声の邪魔にならないような音量が望ましいです。常に一定で変動しないようにお願いします。

---

#### Q11: 複数言語対応
**優先度**: 🟡 Important
**カテゴリ**: Internationalization

**質問**:
日本語以外の言語にも対応する予定はありますか？

**現状**: 日本語のみ（VOICEVOX, OpenVoice V2）

**選択肢**:
- A) **日本語のみ**（当面は対応不要）
- B) **英語追加**（Phase 3 以降で対応）
- C) **多言語対応**（英語、中国語、韓国語など）

**回答**:
A)でお願いします。

**優先言語（対応する場合）**:
当面は対応不要です。

---

#### Q12: エラーハンドリングの詳細仕様
**優先度**: 🟡 Important
**カテゴリ**: Error Handling

**質問**:
以下のエラーケースでどう対応しますか？

**ケース1**: 人物が検出されない（顔認識失敗）
**ケース2**: 背景除去に失敗（セグメンテーションエラー）
**ケース3**: D-ID API がエラー（レート制限、クレジット不足）

**選択肢**:
- A) **エラー表示のみ**（処理を中断、エラーメッセージ表示）
- B) **フォールバック処理**（別の方法で自動リトライ）
- C) **ユーザー選択**（"リトライ" or "キャンセル" ボタン）

**回答**:
C）でお願いします。

**具体的なエラーメッセージ案**:
適切なエラーメッセージを出力して下さい。そして、リトライかキャンセルをユーザーに選択させるようにして下さい。エラーメッセージは日本語で表示してください。

---

#### Q13: プログレス表示の要件
**優先度**: 🟡 Important
**カテゴリ**: UI/UX

**質問**:
長時間処理（30-90秒）の進捗をどう表示しますか？

**選択肢**:
- A) **シンプルなスピナー**（"処理中..." のみ）
- B) **パーセンテージ表示**（"処理中... 45%"）
- C) **ステップ表示**（"画像処理中" → "音声合成中" → "動画生成中"）
- D) **詳細ログ**（各処理の詳細をリアルタイム表示）

**回答**:
B)でお願いします。

---

#### Q14: キャッシング戦略
**優先度**: 🟡 Important
**カテゴリ**: Performance

**質問**:
同じ画像や音声を再利用する場合、キャッシュを活用しますか？

**キャッシュ対象**:
- 背景除去済み画像（透過PNG）
- 音声合成結果（WAV/MP3）
- 最終動画（MP4）

**選択肢**:
- A) **すべてキャッシュ**（再生成不要、高速化）
- B) **画像と音声のみ**（動画は毎回生成）
- C) **キャッシュなし**（常に最新生成）
- D) **ユーザー選択**（"前回の結果を使用" オプション）

**回答**:
C）でお願いします。


**キャッシュ保持期間**:
キャッシュは不要です。

---

## 🟢 NICE TO HAVE QUESTIONS (将来的な機能拡張)

### Future Features & Enhancements

#### Q15: バッチ処理機能
**優先度**: 🟢 Nice to Have
**カテゴリ**: Scalability

**質問**:
複数の動画を一度に生成する機能は必要ですか？

**例**: 10人の社員紹介動画を一括生成

**選択肢**:
- A) **Phase 1 で実装**（CSV アップロード → 一括生成）
- B) **Phase 2 以降**（基本機能完成後に追加）
- C) **不要**（1件ずつ生成で十分）

**回答**:
C)でお願いします。

---

#### Q16: テンプレート機能
**優先度**: 🟢 Nice to Have
**カテゴリ**: User Experience

**質問**:
よく使う設定（背景、BGM、音声設定）をテンプレート保存できると便利ですか？

**選択肢**:
- A) **必要**（"会社紹介用", "商品説明用" などテンプレート保存）
- B) **不要**（毎回設定で問題なし）

**回答**:
B)でお願いします。

---

#### Q17: 動画編集機能
**優先度**: 🟢 Nice to Have
**カテゴリ**: Feature Enhancement

**質問**:
生成後の動画に以下の編集機能は必要ですか？

- トリミング（不要部分をカット）
- テキストオーバーレイ（字幕追加）
- トランジション（フェードイン/アウト）
- フィルター（色調補正）

**選択肢**:
- A) **すべて必要**
- B) **テキストオーバーレイのみ**
- C) **不要**（外部ツールで編集）

**回答**:
C)でお願いします。

---

#### Q18: 音声クローンのさらなる改善
**優先度**: 🟢 Nice to Have
**カテゴリ**: Voice Quality

**質問**:
音声クローンの品質をさらに向上させるための追加機能は？

**選択肢**:
- A) **感情表現**（喜び、悲しみ、怒りなど）
- B) **呼吸音の挿入**（より自然な間）
- C) **背景ノイズ除去**（クリアな音声）
- D) **複数声色**（同じ人物の声色バリエーション）

**回答**:
B)でお願いします。ただし、D-IDが関与していて、調整が難しい場合は対応不可で構いません。

---

#### Q19-68: その他の質問

以下の質問は、上記14項目の回答内容に応じて追加で確認します。

**カテゴリ別の残り質問数**:
- UI/UX詳細（12項目）
- パフォーマンス最適化（8項目）
- セキュリティ・プライバシー（6項目）
- インフラ・デプロイ（10項目）
- テスト・品質保証（8項目）
- 運用・保守（6項目）

---

## 📊 回答状況トラッキング

### Priority-based Progress

| 優先度 | 総数 | 回答済み | 未回答 | 進捗率 |
|--------|------|---------|--------|--------|
| 🔴 Critical | 8 | 0 | 8 | 0% |
| 🟡 Important | 6 | 0 | 6 | 0% |
| 🟢 Nice to Have | 5 | 0 | 5 | 0% |
| **合計** | **19** | **0** | **19** | **0%** |

※ 残り49項目は上記回答後に追加提示

---

## 🎯 次のステップ

### Phase 1: Critical質問への回答（推奨期限: 今日中）

1. Q1-Q8 の 🔴 Critical 質問に回答
2. 不明な点は "検討中" または "お任せします" と記入
3. 回答完了後、このファイルを保存

### Phase 2: Important質問への回答（推奨期限: 明日まで）

4. Q9-Q14 の 🟡 Important 質問に回答
5. 必要に応じて補足情報を追加

### Phase 3: 詳細設計開始

6. 回答に基づいて詳細設計を実施
7. 技術的な実現可能性を確認
8. 工数・スケジュールの最終調整

### Phase 4: 実装開始準備

9. 残り49項目の追加質問を提示（必要に応じて）
10. EC2起動準備（Phase 2画像処理実装前）

---

## 📝 補足情報

### 参照ドキュメント

- `STRATEGIC_ROADMAP_2025.md` - 14週間の実装計画
- `ARCHITECTURE_AWS_MCP.md` - 技術アーキテクチャ詳細
- `INTEGRATION_PROTOCOLS.md` - サービス間連携仕様

### お問い合わせ

不明な点、追加の質問、技術的な相談があればいつでもお声がけください。

---

**作成日**: 2025-11-02
**最終更新**: 2025-11-02
**ステータス**: 🔴 回答待ち
**次回レビュー**: Critical質問回答後
